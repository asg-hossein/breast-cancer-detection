[file name]: .github/workflows/ci.yml
[file content begin]
name: CI/CD Pipeline

on:
  push:
    branches: [main, master, develop]
  pull_request:
    branches: [main, master]

jobs:
  test:
    runs-on: ubuntu-latest
    
    strategy:
      matrix:
        python-version: ['3.9', '3.10', '3.11']
    
    steps:
    - uses: actions/checkout@v3
    
    - name: Setup Python
      uses: actions/setup-python@v4
      with:
        python-version: ${{ matrix.python-version }}
    
    - name: Install dependencies
      run: |
        python -m pip install --upgrade pip
        pip install -r requirements.txt
        pip install pytest pytest-cov
    
    - name: Download dataset if missing
      run: |
        if [ ! -f "data/data.csv" ]; then
          mkdir -p data
          curl -s -o data/data.csv https://raw.githubusercontent.com/kying18/breast-cancer/master/data.csv
        fi
    
    - name: Run unit tests
      run: |
        python -m pytest tests/test_unit.py --cov=scripts --cov-report=xml
    
    - name: Run API tests
      run: |
        python -m pytest tests/test_api.py

  lint:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v3
    
    - name: Setup Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.10'
    
    - name: Install linters
      run: |
        pip install black isort flake8
    
    - name: Check formatting
      run: |
        black --check scripts/ api.py tests/
    
    - name: Check imports
      run: |
        isort --check-only scripts/ api.py tests/
    
    - name: Run flake8
      run: |
        flake8 scripts/ api.py tests/

  validate:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v3
    
    - name: Validate structure
      run: |
        # Check required files
        [ -f api.py ] || exit 1
        [ -f requirements.txt ] || exit 1
        [ -f README.md ] || exit 1
        [ -f .gitignore ] || exit 1
        
        # Check required directories
        [ -d scripts ] || exit 1
        [ -d tests ] || exit 1
        
        # Check required scripts
        [ -f scripts/config.py ] || exit 1
        [ -f scripts/data_processor.py ] || exit 1
        [ -f scripts/model_trainer.py ] || exit 1
        [ -f scripts/evaluator.py ] || exit 1
        [ -f scripts/utils.py ] || exit 1
        [ -f scripts/main_pipeline.py ] || exit 1
        
        # Check test files
        [ -f tests/test_unit.py ] || exit 1
        [ -f tests/test_api.py ] || exit 1
        
        echo "Structure validation passed"
    
    - name: Check file contents
      run: |
        [ -s README.md ] || echo "README.md is empty"
        [ -s .gitignore ] || echo ".gitignore is empty"
        [ -s requirements.txt ] || echo "requirements.txt is empty"
    
    - name: Test imports
      run: |
        python -c "
        try:
            import fastapi
            import pydantic
            import sklearn
            import pandas
            import numpy
            print('All imports successful')
        except ImportError as e:
            print(f'Import error: {e}')
            exit(1)
        "
    
    - name: Test pipeline
      run: |
        python scripts/main_pipeline.py basic --remove_outliers false || echo "Pipeline test completed"
[file content end]